---
// src/components/articles/CreateDiscountButton.astro
---

<button
    id="create-discount-button"
    class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md flex items-center gap-2"
>
    <span class="material-icons text-sm">add</span>
    Create New Discount
</button>

<script>
    import {
        modalState,
        selectedDiscount,
        isEditMode,
    } from "../../store/discountStore";

    const createButton = document.getElementById("create-discount-button");

    createButton?.addEventListener("click", () => {
        // Reset states for create mode
        selectedDiscount.set(null);
        isEditMode.set(true);

        // Open modal in create mode
        modalState.set({
            isOpen: true,
            isUpdating: false,
            isDeleting: false,
            isSubmitting: false,
            error: null,
            activeTab: "basic",
        });
    });
</script>
